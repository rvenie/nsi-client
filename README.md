# NSI Client

Библиотека для асинхронной загрузки справочников из НСИ Минздрава России. Предоставляет удобный интерфейс для получения метаданных и скачивания справочников в формате CSV.

## Основные возможности

- Асинхронное получение метаданных справочников
- Загрузка актуальных версий справочников в формате CSV
- Кэширование метаданных для оптимизации запросов
- Поддержка как одиночных, так и пакетных запросов
- Автоматическое сохранение справочников соответствия названий OID


## Быстрый старт

```python
from nsi_client import NSIClient
import pandas as pd

# Инициализация клиента
client = NSIClient("ваш_токен")

# Загрузка одного справочника в DataFrame
df = client.process_oid("1.2.643.5.1.13.13.11.1358", to_dataframe=True)

# Пакетная загрузка нескольких справочников
oids = [
    "1.2.643.5.1.13.13.99.2.257",
    "1.2.643.5.1.13.13.11.1358"
]
client.process_oid(oids)
```

## Основные методы

**process_oid()**
- Принимает один OID или список OIDs
- Параметр `to_dataframe=True` возвращает данные как pandas DataFrame
- При `to_dataframe=False` сохраняет файлы в формате CSV

**get_all_metadata()**
- Получает метаданные для списка OID
- Использует кэширование для оптимизации запросов
- Возвращает словарь с метаданными

## Требования

- Python 3.7+
- aiohttp
- pandas
- nest_asyncio

## Примечания

- Токен доступа необходимо получить в системе НСИ Минздрава
- Справочники сохраняются в формате CSV в текущей директории
- Создается файл `oid_dictionary.json` с соответствиями OID и названий справочников
